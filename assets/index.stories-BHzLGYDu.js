import{r as a,R as ve}from"./index-Dl6G-zuu.js";import{P as B}from"./index-Beu9b4Vr.js";import{g as he,d as ye,e as oe,f as ke,q as X,c as H,a as N,z as re,_ as F,C as Ce,o as be,B as Pe,k as Se,E as _e}from"./index-CTNOGpui.js";import{C as xe}from"./CheckOutlined-tf6StMXB.js";import{t as pe}from"./type-DdM_TOSm.js";import{_ as Ee}from"./assertThisInitialized-BIGTeGEP.js";import"./toString-Dq7YSAyh.js";import"./index-B_8YWI8i.js";var we={percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},Oe=function(){var e=a.useRef([]),r=a.useRef(null);return a.useEffect(function(){var t=Date.now(),s=!1;e.current.forEach(function(n){if(n){s=!0;var c=n.style;c.transitionDuration=".3s, .3s, .3s, .06s",r.current&&t-r.current<100&&(c.transitionDuration="0s, 0s")}}),s&&(r.current=Date.now())}),e.current},se=0,Te=ye();function De(){var o;return Te?(o=se,se+=1):o="TEST_OR_SSR",o}const Ne=function(o){var e=a.useState(),r=he(e,2),t=r[0],s=r[1];return a.useEffect(function(){s("rc_progress_".concat(De()))},[]),o||t};var $e=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function ae(o){return+o.replace("%","")}function ne(o){var e=o??[];return Array.isArray(e)?e:[e]}var q=100,ee=function(e,r,t,s,n,c,f,i,l,u){var v=arguments.length>10&&arguments[10]!==void 0?arguments[10]:0,p=t/100*360*((360-c)/360),d=c===0?0:{bottom:0,top:180,left:90,right:-90}[f],g=(100-s)/100*r;return l==="round"&&s!==100&&(g+=u/2,g>=r&&(g=r-.01)),{stroke:typeof i=="string"?i:void 0,strokeDasharray:"".concat(r,"px ").concat(e),strokeDashoffset:g+v,transform:"rotate(".concat(n+p+d,"deg)"),transformOrigin:"0 0",transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},Ie=function(e){var r=oe(oe({},we),e),t=r.id,s=r.prefixCls,n=r.steps,c=r.strokeWidth,f=r.trailWidth,i=r.gapDegree,l=i===void 0?0:i,u=r.gapPosition,v=r.trailColor,p=r.strokeLinecap,d=r.style,g=r.className,y=r.strokeColor,h=r.percent,_=ke(r,$e),x=Ne(t),E="".concat(x,"-gradient"),C=q/2-c/2,m=Math.PI*2*C,O=l>0?90+l/2:-90,w=m*((360-l)/360),j=X(n)==="object"?n:{count:n,space:2},D=j.count,I=j.space,Q=ee(m,w,0,100,O,l,u,v,p,c),b=ne(h),P=ne(y),L=P.find(function(k){return k&&X(k)==="object"}),U=Oe(),T=function(){var S=0;return b.map(function(A,W){var V=P[W]||P[P.length-1],R=V&&X(V)==="object"?"url(#".concat(E,")"):void 0,z=ee(m,w,S,A,O,l,u,V,p,c);return S+=A,a.createElement("circle",{key:W,className:"".concat(s,"-circle-path"),r:C,cx:0,cy:0,stroke:R,strokeLinecap:p,strokeWidth:c,opacity:A===0?0:1,style:z,ref:function(K){U[W]=K}})}).reverse()},Y=function(){var S=Math.round(D*(b[0]/100)),A=100/D,W=0;return new Array(D).fill(null).map(function(V,R){var z=R<=S-1?P[0]:v,te=z&&X(z)==="object"?"url(#".concat(E,")"):void 0,K=ee(m,w,W,A,O,l,u,z,"butt",c,I);return W+=(w-K.strokeDashoffset+I)*100/w,a.createElement("circle",{key:R,className:"".concat(s,"-circle-path"),r:C,cx:0,cy:0,stroke:te,strokeWidth:c,opacity:1,style:K,ref:function(ge){U[R]=ge}})})};return a.createElement("svg",Ee({className:H("".concat(s,"-circle"),g),viewBox:"".concat(-q/2," ").concat(-q/2," ").concat(q," ").concat(q),style:d,id:t,role:"presentation"},_),L&&a.createElement("defs",null,a.createElement("linearGradient",{id:E,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},Object.keys(L).sort(function(k,S){return ae(k)-ae(S)}).map(function(k,S){return a.createElement("stop",{key:S,offset:k,stopColor:L[k]})}))),!D&&a.createElement("circle",{className:"".concat(s,"-circle-trail"),r:C,cx:0,cy:0,stroke:v,strokeLinecap:p,strokeWidth:f||c,style:Q}),D?Y():T())};function $(o){return!o||o<0?0:o>100?100:o}function Z(o){var e=o.success,r=o.successPercent,t=r;return e&&"progress"in e&&(t=e.progress),e&&"percent"in e&&(t=e.percent),t}function Le(o){var e=o.percent,r=o.success,t=o.successPercent,s=$(Z({success:r,successPercent:t}));return[s,$($(e)-s)]}function We(o){var e=o.success,r=e===void 0?{}:e,t=o.strokeColor,s=r.strokeColor;return[s||re.green,t||null]}var je=function(e){var r=e.prefixCls,t=e.width,s=e.strokeWidth,n=e.trailColor,c=n===void 0?null:n,f=e.strokeLinecap,i=f===void 0?"round":f,l=e.gapPosition,u=e.gapDegree,v=e.type,p=e.children,d=e.success,g=t||120,y={width:g,height:g,fontSize:g*.15+6},h=s||6,_=l||v==="dashboard"&&"bottom"||void 0,x=function(){if(u||u===0)return u;if(v==="dashboard")return 75},E=Object.prototype.toString.call(e.strokeColor)==="[object Object]",C=We({success:d,strokeColor:e.strokeColor}),m=H("".concat(r,"-inner"),N({},"".concat(r,"-circle-gradient"),E));return a.createElement("div",{className:m,style:y},a.createElement(Ie,{percent:Le(e),strokeWidth:h,trailWidth:h,strokeColor:C,strokeLinecap:i,trailColor:c,prefixCls:r,gapDegree:x(),gapPosition:_}),p)};const Ae=je;var Re=function(o,e){var r={};for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&e.indexOf(t)<0&&(r[t]=o[t]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(o);s<t.length;s++)e.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(o,t[s])&&(r[t[s]]=o[t[s]]);return r},ze=function(e){var r=[];return Object.keys(e).forEach(function(t){var s=parseFloat(t.replace(/%/g,""));isNaN(s)||r.push({key:s,value:e[t]})}),r=r.sort(function(t,s){return t.key-s.key}),r.map(function(t){var s=t.key,n=t.value;return"".concat(n," ").concat(s,"%")}).join(", ")},Be=function(e,r){var t=e.from,s=t===void 0?re.blue:t,n=e.to,c=n===void 0?re.blue:n,f=e.direction,i=f===void 0?r==="rtl"?"to left":"to right":f,l=Re(e,["from","to","direction"]);if(Object.keys(l).length!==0){var u=ze(l);return{backgroundImage:"linear-gradient(".concat(i,", ").concat(u,")")}}return{backgroundImage:"linear-gradient(".concat(i,", ").concat(s,", ").concat(c,")")}},qe=function(e){var r=e.prefixCls,t=e.direction,s=e.percent,n=e.strokeWidth,c=e.size,f=e.strokeColor,i=e.strokeLinecap,l=i===void 0?"round":i,u=e.children,v=e.trailColor,p=v===void 0?null:v,d=e.success,g=f&&typeof f!="string"?Be(f,t):{background:f},y=l==="square"||l==="butt"?0:void 0,h={backgroundColor:p||void 0,borderRadius:y},_=F({width:"".concat($(s),"%"),height:n||(c==="small"?6:8),borderRadius:y},g),x=Z(e),E={width:"".concat($(x),"%"),height:n||(c==="small"?6:8),borderRadius:y,backgroundColor:d==null?void 0:d.strokeColor},C=x!==void 0?a.createElement("div",{className:"".concat(r,"-success-bg"),style:E}):null;return a.createElement(a.Fragment,null,a.createElement("div",{className:"".concat(r,"-outer")},a.createElement("div",{className:"".concat(r,"-inner"),style:h},a.createElement("div",{className:"".concat(r,"-bg"),style:_}),C)),u)};const Fe=qe;var Ge=function(e){for(var r=e.size,t=e.steps,s=e.percent,n=s===void 0?0:s,c=e.strokeWidth,f=c===void 0?8:c,i=e.strokeColor,l=e.trailColor,u=l===void 0?null:l,v=e.prefixCls,p=e.children,d=Math.round(t*(n/100)),g=r==="small"?2:14,y=new Array(t),h=0;h<t;h++){var _=Array.isArray(i)?i[h]:i;y[h]=a.createElement("div",{key:h,className:H("".concat(v,"-steps-item"),N({},"".concat(v,"-steps-item-active"),h<=d-1)),style:{backgroundColor:h<=d-1?_:u,width:g,height:f}})}return a.createElement("div",{className:"".concat(v,"-steps-outer")},y,p)};const Me=Ge;var Ue=function(o,e){var r={};for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&e.indexOf(t)<0&&(r[t]=o[t]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,t=Object.getOwnPropertySymbols(o);s<t.length;s++)e.indexOf(t[s])<0&&Object.prototype.propertyIsEnumerable.call(o,t[s])&&(r[t[s]]=o[t[s]]);return r};pe("line","circle","dashboard");var Ve=pe("normal","exception","active","success"),Ke=function(e){var r=e.prefixCls,t=e.className,s=e.steps,n=e.strokeColor,c=e.percent,f=c===void 0?0:c,i=e.size,l=i===void 0?"default":i,u=e.showInfo,v=u===void 0?!0:u,p=e.type,d=p===void 0?"line":p,g=Ue(e,["prefixCls","className","steps","strokeColor","percent","size","showInfo","type"]);function y(){var b=Z(e);return parseInt(b!==void 0?b.toString():f.toString(),10)}function h(){var b=e.status;return!Ve.includes(b)&&y()>=100?"success":b||"normal"}function _(b,P){var L=e.format,U=Z(e);if(!v)return null;var T,Y=L||function(S){return"".concat(S,"%")},k=d==="line";return L||P!=="exception"&&P!=="success"?T=Y($(f),$(U)):P==="exception"?T=k?a.createElement(Pe,null):a.createElement(Se,null):P==="success"&&(T=k?a.createElement(_e,null):a.createElement(xe,null)),a.createElement("span",{className:"".concat(b,"-text"),title:typeof T=="string"?T:void 0},T)}var x=a.useContext(Ce),E=x.getPrefixCls,C=x.direction,m=E("progress",r),O=h(),w=_(m,O),j=Array.isArray(n)?n[0]:n,D=typeof n=="string"||Array.isArray(n)?n:void 0,I;d==="line"?I=s?a.createElement(Me,F({},e,{strokeColor:D,prefixCls:m,steps:s}),w):a.createElement(Fe,F({},e,{strokeColor:j,prefixCls:m,direction:C}),w):(d==="circle"||d==="dashboard")&&(I=a.createElement(Ae,F({},e,{strokeColor:j,prefixCls:m,progressStatus:O}),w));var Q=H(m,N(N(N(N(N({},"".concat(m,"-").concat(d==="dashboard"&&"circle"||s&&"steps"||d),!0),"".concat(m,"-status-").concat(O),!0),"".concat(m,"-show-info"),v),"".concat(m,"-").concat(l),l),"".concat(m,"-rtl"),C==="rtl"),t);return a.createElement("div",F({},be(g,["status","format","trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","success","successPercent"]),{className:Q,role:"progressbar"}),I)};const Xe=Ke,J=({duration:o,colorOne:e,colorTwo:r,colorThreshold:t,className:s,...n})=>{const[c,f]=a.useState(100);a.useEffect(()=>{let l=new Date().getTime();const u=setInterval(()=>{const p=new Date().getTime()-l;p>=o&&clearInterval(u);const d=100-p/o*100;d<0&&clearInterval(u),f(d)},100);return()=>clearInterval(u)},[]);let i;return t!==void 0?i=c<=t?r:e:i=e,ve.createElement(Xe,{className:s,percent:c,showInfo:!1,strokeColor:`var(--${i})`,reverse:!0,...n})};J.propTypes={className:B.string,duration:B.string,colorOne:B.string,colorTwo:B.string,colorThreshold:B.string};J.__docgenInfo={description:"",methods:[],displayName:"TimeLeftBar",props:{className:{description:"",type:{name:"string"},required:!1},duration:{description:"This indicates how much time is left",type:{name:"string"},required:!1},colorOne:{description:"This indicates initial color of the bar",type:{name:"string"},required:!1},colorTwo:{description:"This indicates color that changes after color one threshold",type:{name:"string"},required:!1},colorThreshold:{description:"This indicates when at what percentage the color one changes",type:{name:"string"},required:!1}}};const sr={title:"Components/TimeLeft Bar",component:J,parameters:{}},me=o=>ve.createElement(J,{...o}),G=me.bind({});G.args={duration:2e4,colorOne:"success-color",colorTwo:"danger-color",colorThreshold:25};const M=me.bind({});M.args={duration:2e4,colorOne:"primary-color"};var ce,ie,le;G.parameters={...G.parameters,docs:{...(ce=G.parameters)==null?void 0:ce.docs,source:{originalSource:"args => <TimeLeftBar {...args} />",...(le=(ie=G.parameters)==null?void 0:ie.docs)==null?void 0:le.source}}};var ue,de,fe;M.parameters={...M.parameters,docs:{...(ue=M.parameters)==null?void 0:ue.docs,source:{originalSource:"args => <TimeLeftBar {...args} />",...(fe=(de=M.parameters)==null?void 0:de.docs)==null?void 0:fe.source}}};const ar=["Default","WithoutThreshold"];export{G as Default,M as WithoutThreshold,ar as __namedExportsOrder,sr as default};
