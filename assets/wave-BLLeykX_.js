import{b as C,c as S,d as _,e as A,f as W}from"./reactNode-CXkgB_jW.js";import{_ as P}from"./createSuper-fkzydAXn.js";import{w as p,u as I,s as L,i as R,j as D,C as V}from"./index-CTNOGpui.js";import{r as f}from"./index-Dl6G-zuu.js";var M=0,u={};function l(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,s=M++,e=r;function t(){e-=1,e<=0?(a(),delete u[s]):u[s]=p(t)}return u[s]=p(t),s}l.cancel=function(r){r!==void 0&&(p.cancel(u[r]),delete u[r])};l.ids=u;var v;function E(a){return!a||a.offsetParent===null||a.hidden}function w(a){return a instanceof Document?a.body:Array.from(a.childNodes).find(function(r){return(r==null?void 0:r.nodeType)===Node.ELEMENT_NODE})}function F(a){var r=(a||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return r&&r[1]&&r[2]&&r[3]?!(r[1]===r[2]&&r[2]===r[3]):!0}var N=function(a){C(s,a);var r=P(s);function s(){var e;return S(this,s),e=r.apply(this,arguments),e.containerRef=f.createRef(),e.animationStart=!1,e.destroyed=!1,e.onClick=function(t,n){var i,c,o=e.props,b=o.insertExtraNode,y=o.disabled;if(!(y||!t||E(t)||t.className.includes("-leave"))){e.extraNode=document.createElement("div");var x=_(e),d=x.extraNode,m=e.context.getPrefixCls;d.className="".concat(m(""),"-click-animating-node");var k=e.getAttributeName();if(t.setAttribute(k,"true"),n&&n!=="#fff"&&n!=="#ffffff"&&n!=="rgb(255, 255, 255)"&&n!=="rgba(255, 255, 255, 1)"&&F(n)&&!/rgba\((?:\d*, ){3}0\)/.test(n)&&n!=="transparent"){d.style.borderColor=n;var h=((i=t.getRootNode)===null||i===void 0?void 0:i.call(t))||t.ownerDocument,T=(c=w(h))!==null&&c!==void 0?c:h;v=I(`
      [`.concat(m(""),"-click-animating-without-extra-node='true']::after, .").concat(m(""),`-click-animating-node {
        --antd-wave-shadow-color: `).concat(n,`;
      }`),"antd-wave",{csp:e.csp,attachTo:T})}b&&t.appendChild(d),["transition","animation"].forEach(function(g){t.addEventListener("".concat(g,"start"),e.onTransitionStart),t.addEventListener("".concat(g,"end"),e.onTransitionEnd)})}},e.onTransitionStart=function(t){if(!e.destroyed){var n=e.containerRef.current;!t||t.target!==n||e.animationStart||e.resetEffect(n)}},e.onTransitionEnd=function(t){!t||t.animationName!=="fadeEffect"||e.resetEffect(t.target)},e.bindAnimationEvent=function(t){if(!(!t||!t.getAttribute||t.getAttribute("disabled")||t.className.includes("disabled"))){var n=function(c){if(!(c.target.tagName==="INPUT"||E(c.target))){e.resetEffect(t);var o=getComputedStyle(t).getPropertyValue("border-top-color")||getComputedStyle(t).getPropertyValue("border-color")||getComputedStyle(t).getPropertyValue("background-color");e.clickWaveTimeoutId=window.setTimeout(function(){return e.onClick(t,o)},0),l.cancel(e.animationStartId),e.animationStart=!0,e.animationStartId=l(function(){e.animationStart=!1},10)}};return t.addEventListener("click",n,!0),{cancel:function(){t.removeEventListener("click",n,!0)}}}},e.renderWave=function(t){var n=t.csp,i=e.props.children;if(e.csp=n,!f.isValidElement(i))return i;var c=e.containerRef;return L(i)&&(c=R(i.ref,e.containerRef)),A(i,{ref:c})},e}return W(s,[{key:"componentDidMount",value:function(){this.destroyed=!1;var t=this.containerRef.current;!t||t.nodeType!==1||(this.instance=this.bindAnimationEvent(t))}},{key:"componentWillUnmount",value:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId),this.destroyed=!0}},{key:"getAttributeName",value:function(){var t=this.context.getPrefixCls,n=this.props.insertExtraNode;return n?"".concat(t(""),"-click-animating"):"".concat(t(""),"-click-animating-without-extra-node")}},{key:"resetEffect",value:function(t){var n=this;if(!(!t||t===this.extraNode||!(t instanceof Element))){var i=this.props.insertExtraNode,c=this.getAttributeName();t.setAttribute(c,"false"),v&&(v.innerHTML=""),i&&this.extraNode&&t.contains(this.extraNode)&&t.removeChild(this.extraNode),["transition","animation"].forEach(function(o){t.removeEventListener("".concat(o,"start"),n.onTransitionStart),t.removeEventListener("".concat(o,"end"),n.onTransitionEnd)})}}},{key:"render",value:function(){return f.createElement(D,null,this.renderWave)}}]),s}(f.Component);N.contextType=V;const j=N;export{j as W};
