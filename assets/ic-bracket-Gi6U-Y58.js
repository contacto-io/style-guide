import{r as l,R as e}from"./index-Dl6G-zuu.js";import{P as a}from"./index-Beu9b4Vr.js";import{I as R}from"./index-ygQga8nQ.js";import{T as w}from"./index-DiD84cwB.js";import{T as q}from"./index-DfD2LYlo.js";import{D as F}from"./dropdown-D_5vEf0B.js";function I(o,m){var C;let f=m.selectionStart,p=m.value.substring(0,f),g=m.value.substring(f,m.value.length);return((C=p==null?void 0:p.split(""))==null?void 0:C.at(-1))!=="|"||(o=o.replace(/[{}]/g,"")),p.replace(/{{$/,"")+o+g}const N=({options:o,onValueSelect:m,className:f,mode:p,onChange:g,dropdownIcon:S,openOnTextboxClick:C,onlyDropdown:V,parentTextFieldRef:x,...T})=>{const[y,E]=l.useState(V),b=l.useRef(),k=l.useRef();l.useEffect(()=>{y&&setTimeout(()=>k.current.focus(),100)},[y]);const D=()=>{const[t,c]=l.useState(""),u=r=>{var i,d;const s=`{{${r==null?void 0:r.value}}}`;V&&x?(i=x.current)==null||i.focus():b&&((d=b.current)==null||d.focus()),g({target:{value:p==="replacer"?s:I(s,document.activeElement)},isSelection:!0}),E(!1),c("")};return e.createElement("div",{className:`${f} options-dropdown`},e.createElement("div",{className:"search-box"},e.createElement(q,{type:"search-box",placeholder:"Search",onChange:({target:r})=>{c(r.value)},autoFocus:!0,ref:k})),o==null?void 0:o.map((r,s)=>{var d;const i=(d=r==null?void 0:r.children)==null?void 0:d.filter(n=>{var v;return(v=n==null?void 0:n.value)==null?void 0:v.toLowerCase().includes(t.toLowerCase())});return i.length===0?null:e.createElement(e.Fragment,null,e.createElement("div",{className:"group-header",key:s},e.createElement(w,{type:"caption-bold",color:"gray-2"},r==null?void 0:r.title)),i==null?void 0:i.map((n,v)=>e.createElement("div",{className:"group-option",key:v,onClick:()=>{u(n)}},n!=null&&n.description?e.createElement("div",{className:"align-desc"},e.createElement(w,{type:"caption"},n==null?void 0:n.label),e.createElement(w,{type:"caption",color:"gray-2"},n==null?void 0:n.description)):e.createElement(w,{type:"caption"},n==null?void 0:n.label))))}))};return e.createElement(e.Fragment,null,e.createElement(F,{overlay:e.createElement(D,null),trigger:["click"],visible:y,placement:"bottomRight",onVisibleChange:t=>E(t)},V?e.createElement("div",null):e.createElement("div",{className:"group-dropdown"},e.createElement(q,{type:"text",ref:b,suffix:e.createElement("div",{onClick:t=>{t.stopPropagation(),E(!y)},className:"contacto-icon--input-suffix-variable-dropdown"},e.createElement(R,{svg:S,size:20})),onClick:t=>!C&&t.stopPropagation(),onKeyUp:t=>{t.persist();const c=t.target.value,u=t.target.selectionEnd,r=c[u-1],s=c.slice(-2)==="{{"||r==="|"&&/\{\{[\w|]+\|$/g.test(c.substring(0,u));E(s)},onChange:t=>{t.persist();const c=t.target.selectionStart,u=t.target.selectionEnd;g(t),setTimeout(()=>{var r,s;return(s=(r=t.target).setSelectionRange)==null?void 0:s.call(r,c,u)},0)},...T}))))};N.propTypes={className:a.string,options:a.object,value:a.string,onValueSelect:a.func,mode:a.string,onChange:a.func,dropdownIcon:a.any,openOnTextboxClick:a.bool,onlyDropdown:a.bool,parentTextFieldRef:a.any};N.__docgenInfo={description:"",methods:[],displayName:"GroupAndSearchDropdown",props:{className:{description:"",type:{name:"string"},required:!1},options:{description:"Dropdown options",type:{name:"object"},required:!1},value:{description:"",type:{name:"string"},required:!1},onValueSelect:{description:"",type:{name:"func"},required:!1},mode:{description:"",type:{name:"string"},required:!1},onChange:{description:"",type:{name:"func"},required:!1},dropdownIcon:{description:"",type:{name:"any"},required:!1},openOnTextboxClick:{description:"",type:{name:"bool"},required:!1},onlyDropdown:{description:"",type:{name:"bool"},required:!1},parentTextFieldRef:{description:"",type:{name:"any"},required:!1}}};const O=o=>l.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...o},l.createElement("path",{d:"M4.501 12.1725C4.501 11.2397 3.834 10.7733 2.5 10.7733V9.33651C3.17703 9.33651 3.67854 9.22367 4.00451 8.99799C4.33551 8.7673 4.501 8.41875 4.501 7.95235V5.61283C4.501 4.83049 4.77182 4.25626 5.31344 3.89017C5.86008 3.51905 6.67753 3.3335 7.7658 3.3335V4.7026C7.19408 4.72768 6.77783 4.84553 6.51705 5.05616C6.26128 5.26178 6.1334 5.57021 6.1334 5.98144V8.21564C6.1334 9.21364 5.55918 9.81043 4.41073 10.006V10.0963C5.55918 10.2768 6.1334 10.8711 6.1334 11.8791V14.1284C6.1334 14.5396 6.26128 14.8506 6.51705 15.0612C6.77282 15.2718 7.18907 15.3821 7.7658 15.3922V16.7688C6.60732 16.7588 5.77232 16.5607 5.26078 16.1745C4.75426 15.7934 4.501 15.174 4.501 14.3164V12.1725Z",fill:"#9B9FAA"}),l.createElement("path",{d:"M15.6043 14.4819C15.6043 15.2643 15.3536 15.8385 14.8521 16.2046C14.3556 16.5707 13.5582 16.7588 12.4599 16.7688V15.3922C12.9363 15.3872 13.3074 15.2894 13.5732 15.0988C13.839 14.9132 13.9719 14.5898 13.9719 14.1284V12.1575C13.9719 11.5506 14.1048 11.0817 14.3706 10.7508C14.6364 10.4198 15.0777 10.2016 15.6946 10.0963V10.006C14.5461 9.81043 13.9719 9.21364 13.9719 8.21564V5.98144C13.9719 5.57021 13.8566 5.26178 13.6259 5.05616C13.4002 4.84553 13.0115 4.72768 12.4599 4.7026V3.3335C13.5782 3.3335 14.3806 3.52658 14.8671 3.91273C15.3586 4.29388 15.6043 4.92076 15.6043 5.79338V7.95235C15.6043 8.45386 15.7623 8.80993 16.0782 9.02056C16.3992 9.23119 16.8731 9.33651 17.5 9.33651V10.7733C16.8832 10.7733 16.4117 10.8811 16.0858 11.0968C15.7648 11.3074 15.6043 11.666 15.6043 12.1725V14.4819Z",fill:"#9B9FAA"}));export{N as G,O as S};
